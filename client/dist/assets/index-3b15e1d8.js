(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();function c(e,n){const t=e.querySelector(n);if(!t)throw new Error(`Could not find element with selector: ${n}`);return t}const R="https://server-yzmezs2csa-ue.a.run.app",w="form",N="fieldset",v="audio",I="#loading-indicator",P="#spoken-mood-text",A="#program-container",M="#happy-button",x="#sad-button",k="#user-prompt-section",B="#speak-mood-button",D="#spoken-mood-submit-button",$="#im-listening",u=c(document,w),C=c(u,N),b=c(document,v),E=c(document,I),p=c(document,P),r=c(document,A),U=c(document,M),q=c(document,x),_=c(document,k),F=c(document,B),L=c(document,D),h=c(document,$);function K(e){let n=0;function t(a){return a.split(" ").map(m=>{const l=document.createElement("span");return l.id=`${n++}`,l.textContent=m,l})}function s(a,m){m.forEach(l=>{a.appendChild(l),a.appendChild(document.createTextNode(" "))})}u.style.display="none",r.innerHTML="",b.style.display="block",r.style.display="block";const o=document.createElement("p");s(o,t(e.intro)),r.appendChild(o),r.appendChild(document.createElement("hr"));const i=document.createElement("h2");s(i,t(`${e.morning.period} ${e.morning.step.careType}`)),r.appendChild(i);const d=document.createElement("p");s(d,t(e.morning.step.text)),r.appendChild(d),r.appendChild(document.createElement("hr"));const y=document.createElement("h2");s(y,t(`${e.afternoonEvening.period} ${e.afternoonEvening.step.careType}`)),r.appendChild(y);const g=document.createElement("p");s(g,t(e.afternoonEvening.step.text)),r.appendChild(g),r.appendChild(document.createElement("hr"));const T=document.createElement("h2");s(T,t(`${e.night.period} ${e.night.step.careType}`)),r.appendChild(T);const O=document.createElement("p");s(O,t(e.night.step.text)),r.appendChild(O),r.appendChild(document.createElement("hr"));const S=document.createElement("p");s(S,t(e.outro)),r.appendChild(S)}async function G({event:e,mood:n}){if(e.preventDefault(),C.disabled=!0,document.body.setAttribute("loading","true"),u.style.display="none",E.style.display="block",p.value&&(n=p.value),!n)throw new Error("No mood selected");fetch(`${R}/create-program`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mood:n})}).then(t=>t.json()).then(t=>{K(t)}).catch(t=>console.error("Error:",t)).finally(()=>{C.disabled=!1,document.body.removeAttribute("loading"),E.style.display="none"})}function j(e){h.style.display="none",U.style.display="none",q.style.display="none",_.style.display="block",p.style.display="block",L.style.display="flex";const n=e.results[0][0].transcript;p.value=n}let f=null;f===null&&[r,E,b,p,L,h].forEach(e=>{e.style.display="none"});const z=document.querySelectorAll('button[name="mood"]');z.forEach(e=>{e.addEventListener("click",n=>{f=n.target.value})});u.addEventListener("submit",e=>{G({event:e,mood:f})});if("SpeechRecognition"in window||"webkitSpeechRecognition"in window){console.log("Speech recognition is supported");const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.onresult=function(n){j(n)},F.addEventListener("click",()=>{_.style.display="none",h.style.display="block",e.start()})}
